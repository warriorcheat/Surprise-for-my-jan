<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Forever & Always üíç</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;800&family=Poppins:wght@300;400;500&display=swap" rel="stylesheet">

<style>
/* ==== SAME DESIGN (UNCHANGED) ==== */
*{margin:0;padding:0;box-sizing:border-box}
body{
  height:100vh;
  background:radial-gradient(circle at top,#160c2a,#05020a 70%);
  font-family:Poppins,sans-serif;
  color:#fff;
  overflow:hidden;
}
.bg-glow{position:absolute;inset:-20%;background:radial-gradient(circle at center,rgba(255,215,0,.15),transparent 60%);animation:rotate 40s linear infinite}
@keyframes rotate{to{transform:rotate(360deg)}}
.particle{position:absolute;width:6px;height:6px;border-radius:50%;background:radial-gradient(circle,#ffd27d,#c89b3c);animation:float 14s linear infinite}
@keyframes float{from{transform:translateY(110vh) scale(.6)}to{transform:translateY(-20vh) scale(1.2)}}
.card{position:absolute;inset:0;display:flex;justify-content:center;align-items:center;animation:fadeUp 1.6s ease}
@keyframes fadeUp{from{opacity:0;transform:translateY(60px) scale(.95)}to{opacity:1;transform:none}}
.hide{display:none}
.glass{width:92%;max-width:480px;padding:45px;border-radius:34px;background:linear-gradient(145deg,rgba(255,255,255,.12),rgba(255,255,255,.04));backdrop-filter:blur(45px);border:1px solid rgba(255,255,255,.18);box-shadow:0 40px 120px rgba(0,0,0,.9);text-align:center}
h1,h2{font-family:'Playfair Display';margin-bottom:18px}
button{padding:16px 42px;border-radius:999px;border:none;background:linear-gradient(135deg,#d4af37,#fff1b8,#c89b3c);box-shadow:0 20px 50px rgba(212,175,55,.85);cursor:pointer;margin:6px}
.voice,.finger{width:130px;height:130px;border-radius:50%;border:2px solid gold;font-size:50px;display:flex;align-items:center;justify-content:center;margin:20px auto;cursor:pointer}
.recording{background:red}
.key{position:fixed;bottom:12px;right:12px;font-size:26px;opacity:.7;cursor:pointer}
</style>
</head>

<body>

<div class="bg-glow"></div>

<audio id="music" loop preload="auto" playsinline>
  <source src="https://github.com/warriorcheat/Surprise-for-my-jan/raw/refs/heads/main/music.mp3">
</audio>

<div class="card" id="love">
  <div class="glass">
    <h1>I love you my Jan Prapti ‚ù§Ô∏è</h1>
    <h2>Will you marry me?</h2>
    <button onclick="yes()">Yes üíç</button>
    <button onclick="no()">No ‚ùå</button>
  </div>
</div>

<div class="card hide" id="kobul">
  <div class="glass">
    <h2>Say Kobul ‚ù§Ô∏è</h2>
    <div class="voice" id="mic">üé§</div>
    <button onclick="toFinger()">Continue</button>
  </div>
</div>

<div class="card hide" id="finger">
  <div class="glass">
    <h2>Place Your Finger üñêÔ∏è</h2>
    <div class="finger" onclick="complete()">üñêÔ∏è</div>
  </div>
</div>

<div class="card hide" id="done">
  <div class="glass">
    <h2 style="color:gold">Marriage Complete üíç</h2>
    <p><b>Abdullah</b> & <b>Prapti</b></p>
    <button onclick="download()">Download Marriage Certificate</button>
  </div>
</div>

<div class="key" onclick="admin()">üîë</div>

<!-- FIREBASE -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-storage-compat.js"></script>

<script>
/* particles */
for(let i=0;i<45;i++){
  let p=document.createElement("div");
  p.className="particle";
  p.style.left=Math.random()*100+"vw";
  p.style.animationDelay=Math.random()*8+"s";
  document.body.appendChild(p);
}

/* firebase */
firebase.initializeApp({
  apiKey:"AIzaSyCXXYQnIt8ovhEidRTx-B3S0k9DZV1oi7M",
  authDomain:"for-my-love-5c7c1.firebaseapp.com",
  projectId:"for-my-love-5c7c1",
  storageBucket:"for-my-love-5c7c1.firebasestorage.app",
  appId:"1:770806135468:web:f36370075360be8d1fbd09"
});
const storage=firebase.storage();

const music=document.getElementById("music");
let recorder,chunks=[];

function yes(){
  music.play().catch(()=>{});
  love.classList.add("hide");
  kobul.classList.remove("hide");
}
function no(){alert("Destiny already chose us ‚ù§Ô∏è")}

/* VOICE ‚Üí CLOUD */
mic.onclick=async ()=>{
  if(!recorder){
    const stream=await navigator.mediaDevices.getUserMedia({audio:true});
    recorder=new MediaRecorder(stream);
    chunks=[];
    recorder.ondataavailable=e=>chunks.push(e.data);
    recorder.onstop=async ()=>{
      const blob=new Blob(chunks,{type:"audio/webm"});
      const ref=storage.ref("voices/"+Date.now()+".webm");
      await ref.put(blob);
      mic.innerText="‚úîÔ∏è";
      mic.classList.remove("recording");
    };
    recorder.start();
    mic.classList.add("recording");
  }else{
    recorder.stop();
    recorder=null;
  }
};

function toFinger(){kobul.classList.add("hide");finger.classList.remove("hide")}
function complete(){finger.classList.add("hide");done.classList.remove("hide")}

function download(){
  const text=`Marriage Certificate\nAbdullah ‚ù§Ô∏è Prapti`;
  const b=new Blob([text],{type:"text/plain"});
  const a=document.createElement("a");
  a.href=URL.createObjectURL(b);
  a.download="Marriage_Certificate.txt";
  a.click();
}

/* ADMIN CLOUD PANEL */
async function admin(){
  if(prompt("Admin Password:")!=="112211"){alert("Wrong password");return}
  const panel=document.createElement("div");
  panel.style.position="fixed";
  panel.style.inset="0";
  panel.style.background="#000";
  panel.style.padding="20px";
  panel.style.overflow="auto";
  panel.innerHTML="<h2>Saved Voices</h2>";
  const list=await storage.ref("voices").listAll();
  for(const i of list.items){
    const url=await i.getDownloadURL();
    panel.innerHTML+=`
      <div style="margin:15px 0;border:1px solid gold;padding:10px">
        <audio controls src="${url}"></audio><br>
        <a href="${url}" download>‚¨á Download</a>
        <button onclick="storage.ref('${i.fullPath}').delete().then(()=>location.reload())">Delete</button>
      </div>`;
  }
  panel.innerHTML+=`<button onclick="this.parentElement.remove()">Close</button>`;
  document.body.appendChild(panel);
}
</script>

</body>
</html>
